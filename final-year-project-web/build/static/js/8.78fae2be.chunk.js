(this["webpackJsonpdigital-grill"]=this["webpackJsonpdigital-grill"]||[]).push([[8],{146:function(e,t,a){},147:function(e,t,a){"use strict";t.a={AppName:"Digital Grill AR"}},162:function(e,t,a){"use strict";var n=a(13),i=(a(1),a(39)),r=a(17);t.a=function(e){return Object(i.connect)((function(e){return{auth:e.auth.user&&e.auth.user.id||null}}))((function(t){return Object(r.jsx)(e,Object(n.a)({},t))}))}},304:function(e,t,a){"use strict";a.r(t);var n=a(4),i=a.n(n),r=a(197),s=a(12),c=a(84),l=a(301),o=a(111),u=a(303),d=a(302),j=a(300),b=a(161),x=a(200),m=a(309),f=a(1),p=a.n(f),h=a(39),O=a(112),g=a(147),v=(a(146),a(85)),y=a(17);var k={signOut:v.b},w=Object(h.connect)((function(e){return{user:e.auth.user}}),k)((function(e){var t=e.user,a=e.signOut;return Object(y.jsx)("header",{children:Object(y.jsxs)("nav",{children:[Object(y.jsx)(O.a,{to:"/",children:g.a.AppName}),Object(y.jsx)("div",{children:t&&t.name?Object(y.jsxs)("ul",{children:[Object(y.jsxs)("li",{children:["Hi, ",t.name]}),Object(y.jsx)("li",{children:Object(y.jsxs)(b.a,{onClick:function(){return a()},children:[Object(y.jsx)("i",{className:"fas fa-sign-out-alt"}),"\u2003 Log Out"]})})]}):Object(y.jsxs)("ul",{children:[Object(y.jsx)("li",{children:Object(y.jsx)(O.a,{to:"/login",children:"Log In"})}),Object(y.jsx)("li",{children:Object(y.jsx)(O.a,{id:"duo",to:"/register",children:"Sign Up"})})]})})]})})}));function I(){return Object(y.jsx)("footer",{children:Object(y.jsxs)("div",{children:[Object(y.jsx)("h1",{children:g.a.AppName}),Object(y.jsxs)("p",{children:["\xa9 ",(new Date).getFullYear()]})]})})}var S=a(13),D=a(307),N=a(308),F=a(310),C=a(297),L=(a(11),a(271)),M=a.n(L),V=a(10);function A(){var e=(new Date).getTime();return window.performance&&"function"===typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?a:3&a|8).toString(16)}))}function R(e,t,a,n,i){return P.apply(this,arguments)}function P(){return(P=Object(s.a)(i.a.mark((function e(t,a,n,r,s){var c,l,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c="https://api.cloudinary.com/v1_1/".concat(r,"/upload"),l=new FormData,o=localStorage.getItem(V.b),l.append("upload_preset",s),l.append("tags",["browser_upload",o]),l.append("file",t),e.next=9,M.a.post("".concat(c),l,{onUploadProgress:function(e){n(parseInt(Math.round(100*e.loaded/e.total)))}});case 9:return u=e.sent,e.abrupt("return",u.data.url);case 13:e.prev=13,e.t0=e.catch(0),a(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function U(e){var t=e.openModal,a=e.setOpenModal,n=e.onSubmit,x=e.initialValues,p=e.loading,h=l.a.useForm(),O=Object(c.a)(h,1)[0],g=Object(f.useState)(),v=Object(c.a)(g,2),k=v[0],w=v[1],I=Object(f.useState)(!1),D=Object(c.a)(I,2),N=D[0],F=D[1],C=Object(f.useState)(x.image[0].url),L=Object(c.a)(C,2),M=L[0],V=L[1],A=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F(!0),0!==(a=Object(r.a)(t.fileList)).length){e.next=4;break}return e.abrupt("return");case 4:return a=a.slice(-1),e.next=7,a.map(function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(a=t).name,r=a.size/1024/1024,s=n.lastIndexOf("."),c=n.slice(s+1),!(r>20)){e.next=11;break}o.a.error({message:"Maximum image size should be 20MB"}),t.status="error",F(!1),e.next=21;break;case 11:if("VRX"===c||"vrx"===c||"Vrx"===c){e.next=17;break}o.a.error({message:"File extension should only be jpg, jpeg, or png"}),t.status="error",F(!1),e.next=21;break;case 17:return e.next=19,R(t,(function(){F(!1),t.status="error"}),w,"biguncleyemi","ydoglg5i");case 19:(l=e.sent)&&(t.url=l,V(l),t.status="done",F(!1));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(u.a,{visible:t,onCancel:function(){O.resetFields(),a(!1)},footer:null,children:Object(y.jsxs)(l.a,{name:"edit-restaurant-form",onFinish:function(){O.validateFields().then((function(e){n(Object(S.a)(Object(S.a)(Object(S.a)({},x),e),{},{image:M})),O.resetFields()})).catch((function(e){console.log("Validate Failed:",e)}))},form:O,initialValues:x,layout:"vertical",children:[Object(y.jsx)(l.a.Item,{label:"Name",name:"name",hasFeedback:!0,rules:[{required:!0,message:"Please input name!"}],children:Object(y.jsx)(d.a,{})}),Object(y.jsx)(l.a.Item,{name:"image",label:"Digital Item",valuePropName:"fileList",getValueFromEvent:function(){},extra:"Please upload a Digital Item with .vsx file extension for now, Thank you \ud83d\ude09.",children:Object(y.jsx)(j.a,{maxCount:1,listType:"picture",beforeUpload:function(e,t){return A({fileList:t})},valuePropName:"fileList",onChange:function(e){return function(e){var t=Object(r.a)(e.fileList);(t=t.slice(-5)).forEach((function(e){var t;e.status=null===e||void 0===e||null===(t=e.originFileObj)||void 0===t?void 0:t.status}))}(e)},children:Object(y.jsx)(b.a,{icon:Object(y.jsx)(m.a,{}),children:N?"Uploading... ".concat(k,"%"):"Click to upload"})})}),Object(y.jsx)(l.a.Item,{children:Object(y.jsx)(b.a,{type:"ghost",htmlType:"submit",loading:p,children:"Submit"})})]})})}var T=a(43);function q(e){var t=Object(f.useState)(!1),a=Object(c.a)(t,2),n=a[0],i=a[1],r=Object(f.useState)(!1),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(f.useState)(""),j=Object(c.a)(d,2),m=j[0],p=j[1],h=e.data,O=void 0===h?{image:"",name:"",address:"",email:"",phoneNumber:"",rating:"",reviews:"",id:""}:h,g=e.setUpdate;return Object(y.jsxs)(x.a,{xs:24,sm:24,md:12,lg:8,xl:8,children:[n&&Object(y.jsx)(U,{openModal:n,setOpenModal:i,initialValues:Object(S.a)(Object(S.a)({},n),{},{image:[{uid:0,name:n.name,status:"done",url:n.image,thumbUrl:n.image}]}),loading:l,onSubmit:function(e){u(!0);var t=A();o.a.warning({message:"Loading....",key:"updateRes"}),T.a.updateADigitalItemRequest(e.id,e).then((function(){u(!1),i(!1),o.a.success({message:"Digital Item Edited Successfully!",key:"updateRes"}),g(t)})).catch((function(e){u(!1),o.a.success({message:"An error occured, please try again!",key:"updateRes"}),console.log(e)}))}}),Object(y.jsxs)("div",{className:"restaurant-card",children:[Object(y.jsx)("div",{className:"restaurant-card_img",style:{backgroundImage:"url(".concat(O.image,")")},children:Object(y.jsx)("i",{className:"fas fa-file"})}),Object(y.jsx)("div",{children:Object(y.jsxs)("div",{className:"restaurant-card-body",children:[Object(y.jsx)("h3",{children:O.name}),Object(y.jsxs)(D.b,{size:"middle",children:[Object(y.jsx)(b.a,{type:"ghost",onClick:function(){return i(O)},icon:Object(y.jsx)(F.a,{})}),Object(y.jsx)(N.a,{content:Object(y.jsxs)("div",{children:["Are you sure you want to delete this Digital Item?",Object(y.jsx)("br",{}),Object(y.jsx)("button",{style:{padding:"5px 10px",color:"white",backgroundColor:"red",border:"none"},onClick:function(){!function(e){var t=A();o.a.warning({message:"Loading....",key:"del"}),T.a.adminDeleteDigitalItemRequest(e.id).then((function(){o.a.success({message:"Digital Item Deleted Successfully!",key:"del"}),g(t)})).catch((function(e){o.a.success({message:"An error occured, please try again!",key:"del"}),console.log(e)}))}(O),p("")},children:"Yes"})]}),trigger:"click",visible:m===O.id,onVisibleChange:function(){return p(m!==O.id?O.id:null)},children:Object(y.jsx)(b.a,{type:"default",icon:Object(y.jsx)(C.a,{})})})]})]})})]})]})}var E=a(162);t.default=Object(E.a)((function(e){var t=Object(f.useState)(""),a=Object(c.a)(t,2),n=a[0],h=a[1],O=function(e){var t=p.a.useRef(!0),a=p.a.useState([]),n=Object(c.a)(a,2),i=n[0],r=n[1],s=p.a.useState(!1),l=Object(c.a)(s,2),o=l[0],u=l[1],d=p.a.useState("false"),j=Object(c.a)(d,2),b=j[0],x=j[1];return p.a.useEffect((function(){return u(!0),T.a.getOwnersDigitalItemsRequest().then((function(e){var t=[];e.docs.map((function(e){return t.push(Object(S.a)({id:e.id},e.data()))})),r(t.reverse()),u(!1)})).catch((function(e){u(!1),x(e.message)})),function(){t.current=!1}}),[u,e]),{documents:i,loader:o,err:b}}(n),g=O.documents,v=O.loader,k=Object(f.useState)(),D=Object(c.a)(k,2),N=D[0],F=D[1],C=Object(f.useState)(!1),L=Object(c.a)(C,2),M=L[0],P=L[1],U=Object(f.useState)(!1),E=Object(c.a)(U,2),H=E[0],_=E[1],z=Object(f.useState)("https://via.placeholder.com/300"),B=Object(c.a)(z,2),J=B[0],X=B[1],Y=l.a.useForm(),G=Object(c.a)(Y,1)[0],K=Object(f.useState)(!1),Q=Object(c.a)(K,2),W=Q[0],Z=Q[1],$=function(){var e=Object(s.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!0),0!==(a=Object(r.a)(t.fileList)).length){e.next=4;break}return e.abrupt("return");case 4:return a=a.slice(-1),e.next=7,a.map(function(){var e=Object(s.a)(i.a.mark((function e(t){var a,n,r,s,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(a=t).name,r=a.size/1024/1024,s=n.lastIndexOf("."),c=n.slice(s+1),!(r>20)){e.next=11;break}o.a.error({message:"Maximum image size should be 20MB"}),t.status="error",P(!1),e.next=21;break;case 11:if("VRX"===c||"vrx"===c||"Vrx"===c){e.next=17;break}o.a.error({message:"File extension should only be vsx"}),t.status="error",P(!1),e.next=21;break;case 17:return e.next=19,R(t,(function(){P(!1),t.status="error"}),F,"biguncleyemi","ydoglg5i");case 19:(l=e.sent)&&(t.url=l,X(l),t.status="done",P(!1));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"Home",children:[Object(y.jsx)(w,{}),Object(y.jsx)(u.a,{visible:W,onCancel:function(){return Z(!1)},footer:null,children:Object(y.jsxs)(l.a,{name:"add-restaurant-form",onFinish:function(){G.validateFields().then((function(e){_(!0);var t=A();e.image=J,e.id=t,e.ownerId=localStorage.getItem(V.b),T.a.postNewDigitalItemRequest(t,e).then((function(){_(!1),o.a.success({message:"Digital Item Added Successfully!"}),G.resetFields(),Z(!1),h(t)})).catch((function(e){_(!1),o.a.success({message:"An error occured, please try again!"}),console.log(e)}))})).catch((function(e){_(!1),console.log("Validate Failed:",e)}))},form:G,layout:"vertical",children:[Object(y.jsx)(l.a.Item,{label:"Name",name:"name",hasFeedback:!0,rules:[{required:!0,message:"Please input name!"}],children:Object(y.jsx)(d.a,{})}),Object(y.jsx)(l.a.Item,{name:"image",required:!0,label:"Digital Item",valuePropName:"fileList",getValueFromEvent:function(){},extra:"Please upload a Digital Item with .vsx file extension for now, Thank you \ud83d\ude09.",children:Object(y.jsx)(j.a,{maxCount:1,listType:"picture",beforeUpload:function(e,t){return $({fileList:t})},valuePropName:"fileList",onChange:function(e){return function(e){var t=Object(r.a)(e.fileList);(t=t.slice(-5)).forEach((function(e){var t;e.status=null===e||void 0===e||null===(t=e.originFileObj)||void 0===t?void 0:t.status}))}(e)},children:Object(y.jsx)(b.a,{icon:Object(y.jsx)(m.a,{}),children:M?"Uploading... ".concat(N,"%"):"Click to upload"})})}),Object(y.jsx)(l.a.Item,{children:Object(y.jsx)(b.a,{type:"ghost",htmlType:"submit",loading:H,children:"Submit"})})]})}),Object(y.jsxs)("div",{className:"Home-Container container",children:[Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(y.jsx)("h2",{style:{padding:"0px 15px"},children:"My Digital Items"}),Object(y.jsx)(b.a,{onClick:function(){return Z(!0)},children:"Add Digital Item"})]}),Object(y.jsx)(x.a,{xs:24,sm:24,md:24,lg:24,xl:24,style:{paddingTop:0},className:"Home-Container-list",children:Object(y.jsx)("div",{style:{padding:"0px 10px 15px"},className:"Home-Container-list_filtered-list",children:g&&g.length>0?g.map((function(t,a){return Object(y.jsx)(q,{data:t,history:e.history,setUpdate:h},a)})):Object(y.jsx)("div",{className:"Home-Container-list_filtered-list-empty",children:Object(y.jsx)("h2",{children:v?"Loading....":"No Digital Item yet. Please add your first Digital Item today."})})})})]}),Object(y.jsx)(I,{})]})}))}}]);
//# sourceMappingURL=8.78fae2be.chunk.js.map